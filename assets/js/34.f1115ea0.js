(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{331:function(e,t,n){"use strict";n.r(t);var a=n(14),o=Object(a.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"nginx-reverse-proxy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-reverse-proxy"}},[e._v("#")]),e._v(" NGINX Reverse Proxy")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("Deze tutorial is gemaakt door "),t("a",{attrs:{href:"https://github.com/Tiebienotjuh",target:"_blank",rel:"noopener noreferrer"}},[e._v("Tiebienotjuh07"),t("OutboundLink")],1)])]),e._v(" "),t("h2",{attrs:{id:"nginx-reverse-proxy-ubuntu-letsencrypt"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-reverse-proxy-ubuntu-letsencrypt"}},[e._v("#")]),e._v(" Nginx Reverse Proxy - Ubuntu "),t("strong",[e._v("(LetsEncrypt)")])]),e._v(" "),t("p",[e._v("Aangeraden om je package manager eerst te updaten\n"),t("code",[e._v("sudo apt-get update && sudo apt update")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("1")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Installeer nginx & certbot met de volgende commando's:\n"),t("code",[e._v("sudo apt install nginx && sudo apt install -y certbot")])])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("2")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Zorg dat het domein (in dit voorbeeld "),t("code",[e._v("test.tiebienotjuh.be")]),e._v(") naar het ip van de vps wijst (A Record)")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("3")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Maak een SSL Certificaat via LetsEncrypt/Certbot met volgende commando\n"),t("code",[e._v("sudo certbot certonly -d test.tiebienotjuh.be")]),e._v("\ntest.tiebienotjuh.be vervangen door jouw domein")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("4")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Maak een nginx config bestand door onderstaand commando uit te voeren:\n"),t("code",[e._v("sudo nano /etc/nginx/sites-available/reverse.conf")]),e._v("\nplaats onderstaande text in het config bestand.")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("server {\n    listen 80;\n    server_name <DOMAIN>;\n\n    return 301 https://$server_name$request_uri;\n}\nserver {\n    listen 443 ssl http2;\n    server_name <DOMAIN>;\n\n    ssl_certificate /etc/letsencrypt/live/<DOMAIN>/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/<DOMAIN>/privkey.pem;\n\n    location / {\n        proxy_pass http://<IP>:<PORT>/;\n    }\n}\n")])])]),t("blockquote",[t("p",[e._v("Vervang "),t("code",[e._v("<DOMAIN>")]),e._v(" door uw domein.\nVervang "),t("code",[e._v("<IP>")]),e._v(" door het ip adres van uw vps.\nVervang "),t("code",[e._v("<PORT>")]),e._v(" door de poort waar het proces op draait.")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("5")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Maak een systemlink tussen de config bestanden met onderstaande commando:\n"),t("code",[e._v("sudo ln -s /etc/nginx/sites-available/reverse.conf /etc/nginx/sites-enabled/reverse.conf")])])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("6")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Restart nginx en normaal gezien is je site nu bereikbaar via het ingestelde domeinnaam!\n"),t("code",[e._v("sudo service nginx restart")])])]),e._v(" "),t("h2",{attrs:{id:"nginx-reverse-proxy-ubuntu-cloudflare"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-reverse-proxy-ubuntu-cloudflare"}},[e._v("#")]),e._v(" Nginx Reverse Proxy - Ubuntu "),t("strong",[e._v("(Cloudflare)")])]),e._v(" "),t("p",[t("strong",[e._v("!")]),e._v(" Jouw domein moet blijf cloudflare staan en je SSL Settings op 'full' of 'full (strict)'.")]),e._v(" "),t("p",[e._v("Aangeraden om je package manager eerst te updaten\n"),t("code",[e._v("sudo apt-get update && sudo apt update")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("1")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Installeer nginx & acme.sh met de volgende commando's:\n"),t("code",[e._v("sudo apt install nginx && curl https://get.acme.sh | sh -s email=JOUWCLOUDFLAREEMAIL && source ~/.bashrc")]),e._v("\nVervang "),t("code",[e._v("JOUWCLOUDFLAREEMAIL")]),e._v(" door uw email van cloudflare (waar het domein op staat)")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("2")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Zorg dat het domein (in dit voorbeeld "),t("code",[e._v("test.tiebienotjuh.be")]),e._v(") naar het ip van de vps wijst (A Record) ("),t("strong",[e._v("PROXIED")]),e._v(")")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("3")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Haal uw persoonlijke cloudflare "),t("code",[e._v("Global API Key")]),e._v(" op via volgende link:\nhttps://dash.cloudflare.com/profile/api-tokens")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("4")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Stel uw gegeven in bij acme.sh met onderstaande commando's:\n"),t("code",[e._v('export CF_Key="GLOBALAPIKEY')]),e._v(" "),t("code",[e._v('export CF_Email="JOUWCLOUDFLAREEMAIL"')]),e._v("\nVervang "),t("code",[e._v("GLOBALAPIKEY")]),e._v(" door de key die u bij stap 3 hebt opgehaald.\nVervang "),t("code",[e._v("JOUWCLOUDFLAREEMAIL")]),e._v(" door het email die bij stap 1 hebt meegegeven bij de installatie van acme.sh")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("5")]),e._v(")")]),e._v(" "),t("blockquote",[t("p",[e._v("Maak een nginx config bestand door onderstaand commando uit te voeren:\n"),t("code",[e._v("sudo nano /etc/nginx/sites-available/reverse.conf")]),e._v("\nplaats onderstaande text in het config bestand.")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("server {\n    listen 80;\n    server_name <DOMAIN>;\n\n    return 301 https://$server_name$request_uri;\n}\nserver {\n    listen 443 ssl http2;\n    server_name <DOMAIN>;\n\n    ssl_certificate /etc/letsencrypt/live/<DOMAIN>/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/<DOMAIN>/privkey.pem;\n\n    location / {\n        proxy_pass http://<IP>:<PORT>/;\n    }\n}\n")])])]),t("p",[e._v("Vervang "),t("code",[e._v("<DOMAIN>")]),e._v(" door uw domein.\nVervang "),t("code",[e._v("<IP>")]),e._v(" door het ip adres van uw vps.\nVervang "),t("code",[e._v("<PORT>")]),e._v(" door de poort waar het proces op draait.")]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("6")]),e._v(")\nMaak het SSL Certificaat met onderstaand commando:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('acme.sh --issue --dns dns_cf -d "<DOMAIN>" \\\n--key-file /etc/letsencrypt/live/<DOMAIN>/privkey.pem \\\n--fullchain-file /etc/letsencrypt/live/<DOMAIN>/fullchain.pem\n')])])]),t("p",[e._v("Vervang "),t("code",[e._v("<DOMAIN>")]),e._v(" door uw domein.")]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("7")]),e._v(")\nMaak een systemlink tussen de config bestanden met onderstaande commando:\n"),t("code",[e._v("sudo ln -s /etc/nginx/sites-available/reverse.conf /etc/nginx/sites-enabled/reverse.conf")])]),e._v(" "),t("p",[e._v("Stap "),t("strong",[e._v("8")]),e._v(")\nRestart nginx en normaal gezien is je site nu bereikbaar via het ingestelde domeinnaam!\n"),t("code",[e._v("sudo service nginx restart")])])])}),[],!1,null,null,null);t.default=o.exports}}]);